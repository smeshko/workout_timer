configs:
  Debug: debug
  Release: release

options:
  deploymentTarget:
    iOS: 14.0
  createIntermediateGroups: true
  groupSortPosition: top
  bundleIdPrefix: com.tsonev.mobile.ios

targetTemplates:

  Target:
    type: application
    platform: iOS
    deploymentTarget: "14.0"
    sources: QuickWorkout
    dependencies:
      - target: DomainEntities
    settings:
      base:
        PRODUCT_NAME: Quick Workouts
        SWIFT_INSTALL_OBJC_HEADER: NO
        SWIFT_OBJC_INTERFACE_HEADER_NAME: ""
        SWIFT_PRECOMPILE_BRIDGING_HEADER: NO
        CODE_SIGN_STYLE: Manual
        TARGETED_DEVICE_FAMILY: 1,2
        ENABLE_BITCODE: NO
      configs:
        Debug:
          # CODE_SIGN_IDENTITY: Apple Development
          DEVELOPMENT_TEAM: GR9SJM3FZP
          PRODUCT_BUNDLE_IDENTIFIER: com.tsonev.mobile.ios.${target_name}.debug
          # PRODUCT_BUNDLE_IDENTIFIER: com.tsonevInc.mobile.ios.WorkoutTimer
          PROVISIONING_PROFILE_SPECIFIER: QuickWorkouts Development
          # PROVISIONING_PROFILE_SPECIFIER: match Development com.tsonevInc.mobile.ios.WorkoutTimer
          CODE_SIGN_ENTITLEMENTS: QuickWorkout/Product/Entitlements/Debug.entitlements
        Release:
          ENABLE_BITCODE: YES
          # PRODUCT_BUNDLE_IDENTIFIER: com.tsonev.mobile.ios.${target_name}
          PRODUCT_BUNDLE_IDENTIFIER: com.tsonev.mobile.ios.${target_name}
          PROVISIONING_PROFILE_SPECIFIER: QuickWorkouts Distribution
          CODE_SIGN_ENTITLEMENTS: QuickWorkout/Product/Entitlements/Release.entitlements
          CODE_SIGN_IDENTITY: iPhone Distribution
          DEVELOPMENT_TEAM: GR9SJM3FZP
          # Apple Distribution: Ivaylo Tsonev (GR9SJM3FZP)
          # PROVISIONING_PROFILE_SPECIFIER: match Apple Distribution com.tsonev.mobile.ios.${target_name}

  CoreFramework:
    type: framework
    platform: iOS
    sources: InternalFrameworks/Core/${target_name}/Source
    settings:
      base:
        SWIFT_INSTALL_OBJC_HEADER: NO
        SWIFT_OBJC_INTERFACE_HEADER_NAME: ""
        SWIFT_PRECOMPILE_BRIDGING_HEADER: NO

  ScreenFramework:
    type: framework
    platform: iOS
    sources: InternalFrameworks/Screens/${target_name}/Source
    dependencies:
      - target: CoreInterface
      - target: CoreLogic
      - target: DomainEntities
    settings:
      base:
        SWIFT_INSTALL_OBJC_HEADER: NO
        SWIFT_OBJC_INTERFACE_HEADER_NAME: ""
        SWIFT_PRECOMPILE_BRIDGING_HEADER: NO

  CoreUnitTests:
    type: bundle.unit-test
    platform: iOS
    sources: InternalFrameworks/Core/${frameworkName}/Tests
    dependencies:
      - target: DomainEntities
    scheme:
      testTargets:
        - name: ${frameworkName}UnitTests
      gatherCoverageData: true
    settings:
      base:
        SWIFT_INSTALL_OBJC_HEADER: NO
        SWIFT_OBJC_INTERFACE_HEADER_NAME: ""
        SWIFT_PRECOMPILE_BRIDGING_HEADER: NO

  ScreenUnitTests:
    type: bundle.unit-test
    platform: iOS
    sources: 
      - path: InternalFrameworks/Screens/${frameworkName}/Tests
        excludes:
          - "**/__Snapshots__"
    dependencies:
      - target: CoreLogic
      - target: DomainEntities
      - target: ${frameworkName}
    scheme:
      testTargets:
        - name: ${frameworkName}UnitTests
      gatherCoverageData: true
    settings:
      base:
        SWIFT_INSTALL_OBJC_HEADER: NO
        SWIFT_OBJC_INTERFACE_HEADER_NAME: ""
        SWIFT_PRECOMPILE_BRIDGING_HEADER: NO


