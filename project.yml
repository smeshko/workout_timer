include: [project_templates.yml]

name: QuickWorkouts

fileGroups:
  - project.yml
  - project_templates.yml
  - .github

packages:
  DomainEntities:
    path: InternalFrameworks/Core/DomainEntities
  CorePersistence:
    path: InternalFrameworks/Core/CorePersistence

  ComposableArchitecture:
    url: https://github.com/pointfreeco/swift-composable-architecture
    from: 0.10.0

targets:
  QuickWorkouts:
    templates: [Target]
    dependencies:
      - target: CoreLogic
      - target: QuickWorkoutsList
      - target: CoreInterface
      - target: QuickWorkoutForm
      - target: RunningTimer
      - target: WorkoutSettings
      - package: CorePersistence
      - package: DomainEntities
    scheme:
      gatherCoverageData: true
      testTargets:
        - name: CoreLogicUnitTests
        - name: CoreInterfaceUnitTests
        - name: QuickWorkoutFormUnitTests
        - name: RunningTimerUnitTests
        - name: QuickWorkoutsListUnitTests
        - name: WorkoutSettingsUnitTests

  CoreLogic:
    templates: [CoreFramework]
    dependencies:
      - package: ComposableArchitecture

  CoreLogicUnitTests:
    templates: [CoreUnitTests]
    templateAttributes:
      frameworkName: CoreLogic
    dependencies:
      - package: ComposableArchitecture

  CoreInterface:
    templates: [CoreFramework]
    dependencies:
      - package: DomainEntities
      - target: CoreLogic

  CoreInterfaceUnitTests:
    templates: [CoreUnitTests]
    templateAttributes:
      frameworkName: CoreInterface

  QuickWorkoutForm:
    templates: [ScreenFramework]
    dependencies:
      - package: CorePersistence

  QuickWorkoutFormUnitTests:
    templates: [ScreenUnitTests]
    templateAttributes:
      frameworkName: QuickWorkoutForm
    dependencies:
      - package: CorePersistence

  RunningTimer:
    templates: [ScreenFramework]
    dependencies:
      - package: CorePersistence

  RunningTimerUnitTests:
    templates: [ScreenUnitTests]
    templateAttributes:
      frameworkName: RunningTimer

  QuickWorkoutsList:
    templates: [ScreenFramework]
    dependencies:
      - target: RunningTimer
      - target: QuickWorkoutForm
      - target: WorkoutSettings
      - package: CorePersistence

  QuickWorkoutsListUnitTests:
    templates: [ScreenUnitTests]
    templateAttributes:
      frameworkName: QuickWorkoutsList
    dependencies:
      - target: RunningTimer
      - target: QuickWorkoutForm
      - target: WorkoutSettings
      - package: CorePersistence

  WorkoutSettings:
    templates: [ScreenFramework]

  WorkoutSettingsUnitTests:
    templates: [ScreenUnitTests]
    templateAttributes:
      frameworkName: WorkoutSettings

schemes: 
  CoreLogic:
    templates: 
      - FrameworkScheme
  QuickWorkoutsList:
    templates: 
      - FrameworkScheme
  CoreInterface:
    templates: 
      - FrameworkScheme
  QuickWorkoutForm:
    templates: 
      - FrameworkScheme
  RunningTimer:
    templates: 
      - FrameworkScheme
